<div class="page-title">
    <h2>PhotoMem</h2>
</div>

<% if images.any? %>
    <!-- <p>Synced image count: <%= images.count %></p> -->
    <!-- <p>Images taken this day in history: <%= today.count %></p> -->

    <div class="home-status">
        <div class="status-item">
            <img src="assets/directory.svg"> <%= directories.count %> total <%= directories.count != 1 ? 'directories' : 'directory' %>
        </div>
        <div class="status-item">
            <img src="assets/directory-open.svg"> <%= directories.count { |dir| dir.status == 'synced' } %> <%= directories.count { |dir| dir.status == 'ignored' } != 1 ? 'directories' : 'directory' %> synced
        </div>
        <div class="status-item">
            <img src="assets/directory-x.svg"> <%= directories.count { |dir| dir.status == 'ignored' } %> <%= directories.count { |dir| dir.status == 'ignored' } != 1 ? 'directories' : 'directory' %> ignored
        </div>
        <div class="status-item">
            <img src="assets/image.svg"> <%= images.count %> <%= images.count != 1 ? 'images' : 'image' %> synced
        </div>
        <div class="status-item">
            <img src="assets/date-check.svg"> <%= today.count %> <%= today.count != 1 ? 'images' : 'image' %> taken today
        </div>
    </div>

    <div class="row">
        <a href="<%= Web.routes.path(:todayOrRandom) %>?date=true" class="button">Today or Random</a>
        <a href="<%= Web.routes.path(:random) %>?date=true" class="button">Random</a>
        <a href="<%= Web.routes.path(:random) %>?orientation=landscape&date=true" class="button">Random Landscape</a>
        <a href="<%= Web.routes.path(:random) %>?orientation=portrait&date=true" class="button">Random Portrait</a>
        <a href="<%= Web.routes.path(:subreddit) %>?sub=art&time=day" class="button">Daily Art Subreddit</a>
        <a href="<%= Web.routes.path(:subreddit) %>?sub=imaginarysliceoflife&time=day" class="button">Daily ImaginarySliceOfLife Subreddit</a>
    </div>

    <% if today.any? %>
        <h3>Images Taken Today</h3>

        <table>
            <thead>
                <tr>
                    <th>Path</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                <%
                path = nil
                count = 0
                today.each do |img|
                    pathWithoutFileName = img.directory.path
                    if path != pathWithoutFileName
                        if !path.nil? %>
                            <tr>
                                <td><%= path %></td>
                                <td><%= count %></td>
                            </tr>
                            <hr>
                        <% end
                        path = pathWithoutFileName
                        count = 0
                    end
                    count += 1
                end
                if !path.nil? %>
                    <tr>
                        <td><%= path %></td>
                        <td><%= count %></td>
                    </tr>
                <% end %>
            </tbody>
        </table>
    <% end %>
<% else %>
    <p class="placeholder">There are no images synced yet. Visit <a href="<%= Web.routes.path(:directoryIndex) %>">Directories</a> to sync directories.</p>
<% end %>
